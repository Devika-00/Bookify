<div class="container mt-4">
  <div class="row">
    <%- include('../../partials/flash-message.ejs') %>
    <div class="col-md-12">
      <h1>Manage Coupons</h1>

      <!-- Bordered Box for Coupon List -->
      <div class="border rounded p-3 shadow">
        <!-- Coupon List -->
        <table class="table table-striped table-bordered">
          <thead>
            <tr>
              <th>Coupon code</th>
              <th>Type</th>
              <th>Description</th>
              <th>Amount</th>
              <th>Min Amount</th>
              <th>Max Amount</th>
              <th>End Date</th>
              <th>Action</th>
            </tr>
          </thead>
          <tbody>
            <% coupons?.forEach(coupon =>{ %>
            <tr>
              <td class="text-center"><%= coupon?.code %></td>
              <td class="text-center"><%= coupon?.type.toUpperCase() %></td>
              <td class="text-center"><%= coupon?.description %></td>
              <td class="text-center"><%= coupon?.value %></td>
              <td class="text-center"><%= coupon?.minAmount %></td>
              <td class="text-center"><%= coupon?.maxAmount %></td>
              <td class="text-center">
                <%= new
                Date(coupon?.expiryDate).toLocaleDateString('en-US',{year:'numeric',month:'long',day:'numeric'})
                %>
              </td>
              <td class="text-center d-flex justify-content-between">
                <a
                  href="/admin/coupons/edit/<%= coupon?._id %>"
                  class="btn btn-sm btn-primary"
                  ><i class="ti ti-edit text-white"></i
                ></a>
                  </td>
              <td>
                <form
                  action="/admin/coupons/delete/<%= coupon?._id %>?_method=DELETE"
                  method="post"
                >
                  <button type="submit" class="btn btn-sm btn-danger ml-1">
                    <i class="bx bxs-trash"></i>
                  </button>
                </form>
              </td>
            </tr>
            <% }) %>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
